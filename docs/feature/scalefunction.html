<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>  <head>    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <title>scalefunction</title>    <meta name="generator" content="MATLAB 7.11">    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">    <meta name="DC.date" content="2011-07-08">    <meta name="DC.source" content="scalefunction.m">    <style type="text/css">body {  background-color: white;  margin:10px;}h1 {  color: #990000;   font-size: x-large;}h2 {  color: #990000;  font-size: medium;}/* Make the text shrink to fit narrow windows, but not stretch too far in wide windows. */ p,h1,h2,div.content div {  max-width: 600px;  /* Hack for IE6 */  width: auto !important; width: 600px;}pre.codeinput {  background: #EEEEEE;  padding: 10px;}@media print {  pre.codeinput {word-wrap:break-word; width:100%;}} span.keyword {color: #0000FF}span.comment {color: #228B22}span.string {color: #A020F0}span.untermstring {color: #B20000}span.syscmd {color: #B28C00}pre.codeoutput {  color: #666666;  padding: 10px;}pre.error {  color: red;}p.footer {  text-align: right;  font-size: xx-small;  font-weight: lighter;  font-style: italic;  color: gray;}  </style>  </head>  <body>    <div class="content">      <pre class="codeinput"><span class="keyword">function</span> F = scalefunction( sbin, dim, bound )<span class="comment">% SCALEFUNCTION - Creates a function 1D or 2D with some typical edges and</span><span class="comment">% steps.</span><span class="comment">%</span><span class="comment">%       F = scalefunction( sbin, dim, bound );</span><span class="comment">%</span><span class="comment">% Inputs:</span><span class="comment">%   sbin : the image will have size 11*sbin; must be a multiple of 3 (or will</span><span class="comment">%      be forced.</span><span class="comment">%   dim : result will a graph (dim=1) or an image (dim=2).</span><span class="comment">%   bound : vector 3*1 of the [min,med,max] for the values of the function.</span><span class="comment">%</span><span class="comment">% Outputs:</span><span class="comment">%     - F : 1D or 2D-function with some typical edges and steps.</span><span class="keyword">if</span> exist(<span class="string">'dim'</span>,<spanclass="string">'var'</span>)~=1,  dim=1; <spanclass="keyword">end</span>;<span class="keyword">if</span> exist(<span class="string">'bound'</span>,<spanclass="string">'var'</span>)~=1  Min=0.8; Med = 1.; Max = 1.2;<span class="keyword">else</span>  Min=bound(1); Med=bound(2); Max=bound(3);<span class="keyword">end</span>;Max2 = Med+ 2.*(Max-Med)/3.;Min2 = Med - 2.*(Med-Min)/3.;q=floor(sbin/3.);<span class="keyword">if</span>(sbin~=3*q)  fprintf(<span class="string">'Parameter sbin=%d changed to sbin=%d'</span>,<spanclass="keyword">...</span>	  sbin, 3*q );<span class="keyword">end</span>;sbin=3*q;size = 11 * sbin;ncol = size;<span class="comment">% nraw=size ou 1</span>nraw = (dim==2)*size + (dim==1);x = 1:size; y = 1:nraw;[X,Y] = meshgrid(x,y);F = ones(nraw, ncol);<span class="comment">%%%%  Edge type 1</span><span class="comment">% branche 1</span>alpha = (Max-Med) / sbin;beta = Med - alpha * sbin;F(:, sbin+1:2*sbin) = alpha * X(:, sbin+1:2*sbin) + <span class="keyword">...</span>    beta;<span class="comment">% branche 2</span>alphap = (Med-Max) / sbin;betap = Med + 3*alpha * sbin;F(:, 2*sbin+1:3*sbin) = alphap * X(:, 2*sbin+1:3*sbin) <span class="keyword">...</span>    + betap;<span class="comment">%%%% Gaussian</span>sigma=2;fac = exp(-1/(2*sigma));[x,y] = meshgrid(linspace(-1,1,2*sbin),1:nraw);F(:,4*sbin+1:6*sbin) = 1 -fac + exp( - x.^2 / (2*sigma));<span class="comment">%%%% Edge type 2</span>x1=q*23; x2=q*25;<span class="comment">% branche 1</span>alpha= (Max2-Med) / (2*q);beta = Med - 7*alpha * sbin;F(:,7*sbin+1:x1) = alpha * X(:, 7*sbin+1:x1) + beta;<span class="comment">% branche 3</span>alphap= (Med-Min2) / (2*q);betap = Med - 9*alphap * sbin;F(:,x2:9*sbin) = alphap * X(:, x2:9*sbin) + betap;<span class="comment">% branche 2</span>alpha2 = (Min2-Max2) / (2*q);beta2 = Max2 - alpha2 * 23 * q;F(:,x1:x2) = alpha2 * X(:, x1:x2) + beta2;<span class="comment">%%%% Step</span>F(:,10*sbin+1:ncol) = Min;<span class="keyword">if</span> dim==1  figure, plot(X,F)<span class="keyword">elseif</span> dim==2  figure, surf(F); colormap <span class="string">jet</span>;  figure, imagesc(F), colormap <span class="string">gray</span>, axis <spanclass="string">image</span>;<span class="keyword">end</span>;</pre> </div>    <!--##### SOURCE BEGIN #####function F = scalefunction( sbin, dim, bound )% SCALEFUNCTION - Creates a function 1D or 2D with some typical edges and% steps.%%       F = scalefunction( sbin, dim, bound );%     % Inputs:%   sbin : the image will have size 11*sbin; must be a multiple of 3 (or will%      be forced.%   dim : result will a graph (dim=1) or an image (dim=2).%   bound : vector 3*1 of the [min,med,max] for the values of the function.%% Outputs:%     - F : 1D or 2D-function with some typical edges and steps.if exist('dim','var')~=1,  dim=1; end;if exist('bound','var')~=1  Min=0.8; Med = 1.; Max = 1.2;else   Min=bound(1); Med=bound(2); Max=bound(3);end;Max2 = Med+ 2.*(Max-Med)/3.;Min2 = Med - 2.*(Med-Min)/3.;q=floor(sbin/3.);if(sbin~=3*q)  fprintf('Parameter sbin=%d changed to sbin=%d',...	  sbin, 3*q );end;sbin=3*q;size = 11 * sbin; ncol = size;% nraw=size ou 1nraw = (dim==2)*size + (dim==1);x = 1:size; y = 1:nraw;[X,Y] = meshgrid(x,y);F = ones(nraw, ncol);%%%%  Edge type 1% branche 1alpha = (Max-Med) / sbin;beta = Med - alpha * sbin;F(:, sbin+1:2*sbin) = alpha * X(:, sbin+1:2*sbin) + ...    beta;% branche 2alphap = (Med-Max) / sbin;betap = Med + 3*alpha * sbin;F(:, 2*sbin+1:3*sbin) = alphap * X(:, 2*sbin+1:3*sbin) ...    + betap;%%%% Gaussiansigma=2;fac = exp(-1/(2*sigma));[x,y] = meshgrid(linspace(-1,1,2*sbin),1:nraw);F(:,4*sbin+1:6*sbin) = 1 -fac + exp( - x.^2 / (2*sigma));				   %%%% Edge type 2x1=q*23; x2=q*25;% branche 1alpha= (Max2-Med) / (2*q);beta = Med - 7*alpha * sbin;F(:,7*sbin+1:x1) = alpha * X(:, 7*sbin+1:x1) + beta;% branche 3alphap= (Med-Min2) / (2*q);betap = Med - 9*alphap * sbin;F(:,x2:9*sbin) = alphap * X(:, x2:9*sbin) + betap;% branche 2alpha2 = (Min2-Max2) / (2*q);beta2 = Max2 - alpha2 * 23 * q;F(:,x1:x2) = alpha2 * X(:, x1:x2) + beta2;%%%% StepF(:,10*sbin+1:ncol) = Min;if dim==1    figure, plot(X,F)elseif dim==2    figure, surf(F); colormap jet;  figure, imagesc(F), colormap gray, axis image;end;##### SOURCE END #####-->  </body></html>