<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>  <head>    <meta content="text/html; charset=utf-8" http-equiv="content-type">    <!--This HTML was auto-generated from MATLAB code.To make changes, update the MATLAB code and republish this document.      -->    <title>INFORGBEDGE - Visualization of edge magnitude and orientation of      color images.</title>    <meta name="generator" content="MATLAB 7.14">    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">    <meta name="DC.date" content="2012-05-31">    <meta name="DC.source" content="inforgbedge.m">    <style type="text/css">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}html { min-height:100%; margin-bottom:1px; }html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }html body td { vertical-align:top; text-align:left; }h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }a { color:#005fce; text-decoration:none; }a:hover { color:#005fce; text-decoration:underline; }a:visited { color:#004aa0; text-decoration:none; }p { padding:0px; margin:0px 0px 20px; }img { padding:0px; margin:0px 0px 20px; border:none; }p img, pre img, tt img, li img { margin-bottom:0px; } ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }ul li { padding:0px; margin:0px 0px 7px 0px; }ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }ul li ol li { list-style:decimal; }ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }ol li ol li { list-style-type:lower-alpha; }ol li ul { padding-top:7px; }ol li ul li { list-style:square; }.content { font-size:1.2em; line-height:140%; padding: 20px; }pre, tt, code { font-size:12px; }pre { margin:0px 0px 20px; }pre.error { color:red; }pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }span.keyword { color:#0000FF }span.comment { color:#228B22 }span.string { color:#A020F0 }span.untermstring { color:#B20000 }span.syscmd { color:#B28C00 }.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }.footer p { margin:0px; }  </style>  </head>  <body>    <div class="content">      <h1>INFORGBEDGE - Visualization of edge magnitude and orientation of color        images.</h1>      <!--introduction--><!--/introduction-->      <h2>Contents</h2>      <div>        <ul>          <li><a href="#1">Description</a></li>          <li><a href="#2">Syntax</a></li>          <li><a href="#3">Inputs</a></li>          <li><a href="#4">Outputs</a></li>          <li><a href="#6">See also</a></li>          <li><a href="#7">Function implementation</a></li>        </ul>      </div>      <h2>Description<a name="1"></a></h2>      <p>Provide edge magnitude and orientation of multispectral images based on        their derivatives, using multichannel approach (gradient structure        tensor), and reduced (RGB or LAB) approach (gradient). Used for simple        visual comparison of both approaches.</p>      <h2>Syntax<a name="2"></a></h2>      <pre>   [E, M, O, rE, rM, rO] = INFORGBEDGE(I, 'disp', true);   [E, M, O, rE, rM, rO] = INFORGBEDGE(I, reduce, rho, sig, der, int);</pre>      <h2>Inputs<a name="3"></a></h2>      <p><b><tt>I</tt></b> : an input image with size <tt>(X,Y,C)</tt>, where <tt>C=3</tt>        when <tt>I</tt> is multichannel.</p>      <p><b><tt>reduce</tt></b> : optional string setting the method used for        reducing the input image into a scalar (graylevel) one; it is either <tt>'rgb'</tt>        for calling <tt>RGB2GRAY</tt> or <tt>'lab'</tt> for calling <tt>RGB2LAB</tt>;        default: <tt>reduce='rgb'</tt>.</p>      <p><b><tt>rho</tt></b> : optional integration scale (see <tt>GTSMOOTH</tt>);        default: <tt>rho=0</tt>, ie. in order to compare both multichannel and        reduced approaches, we skip in principle the spatial averaging of the        tensor.</p>      <p><b><tt>sig</tt></b> : optional differentiation scale (see <tt>GTSMOOTH</tt>);        default: <tt>sig=1</tt>, i.e. Gaussian regularisation is used for        estimating the derivatives.</p>      <p><b><tt>der</tt></b> : optional string for pre-smoothing/differentiation        (see <tt>GRDSMOOTH</tt>): <tt>'matlab'</tt>, <tt>'vista'</tt>, <tt>'fast'</tt>,        <tt>'conv'</tt>, <tt>'fleck'</tt>, <tt>'tap5'</tt>, <tt>'tap7'</tt>,        <tt>'sob'</tt>, <tt>'opt'</tt> or <tt>'ana'</tt>; default: <tt>der='matlab'</tt>.</p>      <p><b><tt>int</tt></b> : optional string for post-smoothing (see <tt>GRD2GST</tt>):        <tt>'matlab'</tt>, <tt>'conv'</tt> or <tt>'fast'</tt>; default: <tt>int='fast'</tt>.</p>      <h2>Outputs<a name="4"></a></h2>      <p><b><tt>E, rE</tt></b> : edge maps obtained through multichannel and        reduced approaches.</p>      <p><b><tt>M, O</tt></b> : magnitude and orientation using the multichannel        approach.</p>      <p><b><tt>rM, rO</tt></b> : ibid reducing the image first.</p>      <p>Displays the overlapped gradient magnitudes and edge maps of a color        image using both multispectral and reduced approaches.</p>      <h2>See also<a name="6"></a></h2>      <p>Related: <a href="EDGECORNER.html"><tt>EDGECORNER</tt></a>, <a href="KOETHEDGE.html"><tt>KOETHEDGE</tt></a>,        <a href="CANNYEDGE.html"><tt>CANNYEDGE</tt></a>. Called: <a href="INFORGBEDGE_BASE.html"><tt>INFORGBEDGE_BASE</tt></a>.</p>      <h2>Function implementation<a name="7"></a></h2>      <pre class="codeinput"><span class="keyword">function</span> [E, M, O, rE, rM, rO] = inforgbedge(I, varargin)</pre>      <p>parsing parameters</p>      <pre class="codeinput">error(nargchk(1, 19, nargin, <span class="string">'struct'</span>));error(nargoutchk(0, 4, nargout, <span class="string">'struct'</span>));<span class="comment">% mandatory parameter</span><span class="keyword">if</span> ~isnumeric(I)    error(<span class="string">'gstsmooth:inputerror'</span>,<span class="string">'a matrix is required in input'</span>);<span class="keyword">end</span><span class="comment">% optional parameters</span>p = createParser(<span class="string">'GSTSMOOTH'</span>);<span class="comment">% principal optional parameters</span>p.addOptional(<span class="string">'reduce'</span>, <span class="string">'rgb'</span>, @(x)ischar(x) &amp;&amp; any(strcmpi(x,{<spanclass="string">'rgb'</span>,<spanclass="string">'lab'</span>})));p.addOptional(<span class="string">'rho'</span>, 0, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;=0);p.addOptional(<span class="string">'sigma'</span>, 1, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;=0);p.addOptional(<span class="string">'der'</span>, <span class="string">'matlab'</span>, @(x)islogical(x) || (ischar(x) &amp;&amp; <spanclass="keyword">...</span>    any(strcmpi(x,{<span class="string">'matlab'</span>,<span class="string">'vista'</span>,<spanclass="string">'fast'</span>,<spanclass="string">'conv'</span>,<spanclass="string">'fleck'</span>, <spanclass="keyword">...</span>    <span class="string">'tap5'</span>,<span class="string">'tap7'</span>,<spanclass="string">'sob'</span>,<spanclass="string">'opt'</span>,<spanclass="string">'ana'</span>}))));p.addOptional(<span class="string">'int'</span>, <span class="string">'fast'</span>, @(x)islogical(x) || (ischar(x) &amp;&amp; <spanclass="keyword">...</span>    any(strcmpi(x,{<span class="string">'matlab'</span>,<span class="string">'conv'</span>,<spanclass="string">'fast'</span>})))); <spanclass="comment">% 'ani' not allowed here</span><span class="comment">% parse and validate all input arguments</span>p.parse(varargin{:});p = getvarParser(p);</pre>      <p>checking/setting variables</p>      <pre class="codeinput"><span class="keyword">if</span> size(I,3)~=3    error(<span class="string">'inforgbedge:inputerror'</span>, <span class="string">'matrix (m x n x 3) required in input'</span>);<span class="keyword">end</span>I = rescale(I,0,1);<span class="keyword">if</span> strcmpi(p.reduce,<span class="string">'rgb'</span>)    R = rgb2gray(I);<span class="keyword">elseif</span> strcmpi(p.reduce,<span class="string">'lab'</span>)    C = makecform(<span class="string">'srgb2lab'</span>);    R = applycform(I,C);    R = R(:,:,1);    <span class="comment">% R = rgb2lab(I);</span><span class="keyword">end</span></pre>      <p>main calculations</p>      <pre class="codeinput">[E, M, O, rE, rM, rO] = inforgbedge_base(I, R, p.rho, p.sigma, p.der, p.int);</pre>      <p>display</p>      <pre class="codeinput"><span class="keyword">if</span> p.disp    <span class="comment">%  figure, colormap gray</span>    <span class="comment">%  subplot(1,2,1), imagesc(mag), axis image off, title('multichannel')</span>    <span class="comment">%  subplot(1,2,2), imagesc(rmag), axis image off, title('reduced')</span>    figure,    subplot(1,2,1), imagesc(rescale(cat(3, M, rM, rM),0,1))    title(<span class="string">'magnitude: R multichannel - GB reduced'</span>), axis <spanclass="string">image</span> <spanclass="string">off</span>    subplot(1,2,2), imagesc(rescale(cat(3, E, rE, rE),0,1))    title(<span class="string">'edge map: R multichannel - GB reduced'</span>), axis <spanclass="string">image</span> <spanclass="string">off</span><span class="keyword">end</span></pre>      <pre class="codeinput"><span class="keyword">end</span> <span class="comment">% end of inforgbedge</span></pre>    </div>    <!--##### SOURCE BEGIN #####%% INFORGBEDGE - Visualization of edge magnitude and orientation of color images.%%% Description% Provide edge magnitude and orientation of multispectral images based on % their derivatives, using multichannel approach (gradient structure% tensor), and reduced (RGB or LAB) approach (gradient). Used for simple% visual comparison of both approaches.%%% Syntax%     [E, M, O, rE, rM, rO] = INFORGBEDGE(I, 'disp', true);%     [E, M, O, rE, rM, rO] = INFORGBEDGE(I, reduce, rho, sig, der, int);%%% Inputs% *|I|* : an input image with size |(X,Y,C)|, where |C=3| when |I| is multichannel.%   % *|reduce|* : optional string setting the method used for reducing the input%      image into a scalar (graylevel) one; it is either |'rgb'| for calling%      |RGB2GRAY| or |'lab'| for calling |RGB2LAB|; default: |reduce='rgb'|.%      % *|rho|* : optional integration scale (see |GTSMOOTH|); default: |rho=0|, %      ie. in order to compare both multichannel and reduced approaches, we%      skip in principle the spatial averaging of the tensor.%      % *|sig|* : optional differentiation scale (see |GTSMOOTH|); default: |sig=1|,%      i.e. Gaussian regularisation is used for estimating the derivatives.%      % *|der|* : optional string for pre-smoothing/differentiation (see |GRDSMOOTH|):%      |'matlab'|, |'vista'|, |'fast'|, |'conv'|, |'fleck'|, |'tap5'|, |'tap7'|,%      |'sob'|, |'opt'| or |'ana'|; default: |der='matlab'|.%      % *|int|* : optional string for post-smoothing (see |GRD2GST|): |'matlab'|,%      |'conv'| or |'fast'|; default: |int='fast'|.%%% Outputs% *|E, rE|* : edge maps obtained through multichannel and reduced approaches.%      % *|M, O|* : magnitude and orientation using the multichannel approach.%      % *|rM, rO|* : ibid reducing the image first.%% Displays the overlapped gradient magnitudes and edge maps of a color% image using both multispectral and reduced approaches.%%% Credit% <mailto:grazzja@lanl.gov J.Grazzini> (ISR-2/LANL)%%% See also% Related:% <EDGECORNER.html |EDGECORNER|>,% <KOETHEDGE.html |KOETHEDGE|>,% <CANNYEDGE.html |CANNYEDGE|>.% Called: % <INFORGBEDGE_BASE.html |INFORGBEDGE_BASE|>.%% Function implementationfunction [E, M, O, rE, rM, rO] = inforgbedge(I, varargin)%% % parsing parameterserror(nargchk(1, 19, nargin, 'struct'));error(nargoutchk(0, 4, nargout, 'struct'));% mandatory parameterif ~isnumeric(I)    error('gstsmooth:inputerror','a matrix is required in input'); end% optional parametersp = createParser('GSTSMOOTH');   % principal optional parametersp.addOptional('reduce', 'rgb', @(x)ischar(x) && any(strcmpi(x,{'rgb','lab'})));p.addOptional('rho', 0, @(x)isscalar(x) && isfloat(x) && x>=0);p.addOptional('sigma', 1, @(x)isscalar(x) && isfloat(x) && x>=0);p.addOptional('der', 'matlab', @(x)islogical(x) || (ischar(x) && ...    any(strcmpi(x,{'matlab','vista','fast','conv','fleck', ...    'tap5','tap7','sob','opt','ana'}))));p.addOptional('int', 'fast', @(x)islogical(x) || (ischar(x) && ...    any(strcmpi(x,{'matlab','conv','fast'})))); % 'ani' not allowed here% parse and validate all input argumentsp.parse(varargin{:}); p = getvarParser(p);                                                            %%% checking/setting variablesif size(I,3)~=3    error('inforgbedge:inputerror', 'matrix (m x n x 3) required in input');endI = rescale(I,0,1);if strcmpi(p.reduce,'rgb')    R = rgb2gray(I);elseif strcmpi(p.reduce,'lab')    C = makecform('srgb2lab');    R = applycform(I,C);    R = R(:,:,1);    % R = rgb2lab(I);end%%% main calculations[E, M, O, rE, rM, rO] = inforgbedge_base(I, R, p.rho, p.sigma, p.der, p.int);%%% displayif p.disp    %  figure, colormap gray    %  subplot(1,2,1), imagesc(mag), axis image off, title('multichannel')    %  subplot(1,2,2), imagesc(rmag), axis image off, title('reduced')    figure,    subplot(1,2,1), imagesc(rescale(cat(3, M, rM, rM),0,1))    title('magnitude: R multichannel - GB reduced'), axis image off    subplot(1,2,2), imagesc(rescale(cat(3, E, rE, rE),0,1))    title('edge map: R multichannel - GB reduced'), axis image offendend % end of inforgbedge##### SOURCE END #####-->  </body></html>