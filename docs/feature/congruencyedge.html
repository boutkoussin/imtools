<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>  <head>    <meta content="text/html; charset=utf-8" http-equiv="content-type">    <!--This HTML was auto-generated from MATLAB code.To make changes, update the MATLAB code and republish this document.      -->    <title>CONGRUENCYEDGE - Wrapper for edge detection based on phase      congruency.</title>    <meta name="generator" content="MATLAB 7.14">    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">    <meta name="DC.date" content="2012-05-31">    <meta name="DC.source" content="congruencyedge.m">    <style type="text/css">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}html { min-height:100%; margin-bottom:1px; }html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }html body td { vertical-align:top; text-align:left; }h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }a { color:#005fce; text-decoration:none; }a:hover { color:#005fce; text-decoration:underline; }a:visited { color:#004aa0; text-decoration:none; }p { padding:0px; margin:0px 0px 20px; }img { padding:0px; margin:0px 0px 20px; border:none; }p img, pre img, tt img, li img { margin-bottom:0px; } ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }ul li { padding:0px; margin:0px 0px 7px 0px; }ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }ul li ol li { list-style:decimal; }ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }ol li ol li { list-style-type:lower-alpha; }ol li ul { padding-top:7px; }ol li ul li { list-style:square; }.content { font-size:1.2em; line-height:140%; padding: 20px; }pre, tt, code { font-size:12px; }pre { margin:0px 0px 20px; }pre.error { color:red; }pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }span.keyword { color:#0000FF }span.comment { color:#228B22 }span.string { color:#A020F0 }span.untermstring { color:#B20000 }span.syscmd { color:#B28C00 }.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }.footer p { margin:0px; }  </style>  </head>  <body>    <div class="content">      <h1>CONGRUENCYEDGE - Wrapper for edge detection based on phase congruency.</h1>      <!--introduction--><!--/introduction-->      <h2>Contents</h2>      <div>        <ul>          <li><a href="#1">Description</a></li>          <li><a href="#2">Syntax</a></li>          <li><a href="#3">Inputs</a></li>          <li><a href="#4">Property [propertyname propertyvalues]</a></li>          <li><a href="#5">Outputs</a></li>          <li><a href="#6">Acknowledgment</a></li>          <li><a href="#7">References</a></li>          <li><a href="#9">See also</a></li>          <li><a href="#10">Function implementation</a></li>        </ul>      </div>      <h2>Description<a name="1"></a></h2>      <p>Nothing else than a wrapper function for P.Kovesi's edge and corner        detector based on phase congrunecy [Koves99,Koves02,Koves03]. See        function <tt>PHASECONG3</tt> in distribution [Kovesi] if you'd rather        use the original function.</p>      <h2>Syntax<a name="2"></a></h2>      <pre>   [M, m]  = CONGRUENCYEDGE(I);   [M m or ft pc EO T]  = ...        CONGRUENCYEDGE(I, nscale, norient, minwave, mult, ...        'Property', propertyvalue, ...);</pre>      <h2>Inputs<a name="3"></a></h2>      <p>See <tt>PHASECONG3</tt> for input parameters.</p>      <p><b><tt>I</tt></b> : input image, possibly multichannel.</p>      <p><b><tt>nscale</tt></b> : number of wavelet scales; default: <tt>nscale=4</tt>.</p>      <p><b><tt>norient</tt></b> : number of filter orientations; default: <tt>norient=6</tt>.</p>      <p><b><tt>minwave</tt></b> : wavelength of smallest scale filter; default:        <tt>minwave=3</tt>.</p>      <p><b><tt>mult</tt></b> : scaling factor between successive filters;        default: <tt>mult=2.1</tt>.</p>      <h2>Property [propertyname propertyvalues]<a name="4"></a></h2>      <p><b><tt>'sigonof'</tt></b> : ratio of the standard deviation of the        Gaussian describing the log Gabor filter's transfer function in the        frequency domain to the filter center frequency; default: <tt>sigonof=0.55</tt>.</p>      <p><b><tt>'k'</tt></b> : standard deviations of the noise energy beyond        the mean at which the noise threshold point is set; default: <tt>k=2</tt>.</p>      <p><b><tt>'cutoff'</tt></b> : fractional measure of frequency spread below        which phase congruency values get penalized; default: <tt>cutoff=0.5</tt>.</p>      <p><b><tt>'g'</tt></b> : sharpness of the transition in the sigmoid        function used to weight phase congruency for frequency spread; default:        <tt>g=10</tt>.</p>      <p><b><tt>'noise'</tt></b> : parameter specifying the method used to        determine noise statistics; it is either:</p>      <div>        <ul>          <li>-1 to use median of smallest scale filter responses,</li>          <li>-2 to use mode of smallest scale filter responses,</li>          <li>or any &gt;=0 value to set a fixed noise threshold;</li>        </ul>      </div>      <p>default: <tt>noise=-1</tt>.</p>      <h2>Outputs<a name="5"></a></h2>      <p><b><tt>M</tt></b> : maximum moment of phase congruency covariance; used        as an indicator of edge strength.</p>      <p><b><tt>m</tt></b> : minimum moment of phase congruency covariance; used        as an indicator of corner strength.</p>      <p><b><tt>or</tt></b> : orientation image in integer degrees 0-180,        positive anticlockwise; 0 corresponds to a vertical edge, 90 is        horizontal.</p>      <p><b><tt>ft</tt></b> : local weighted mean phase angle at every point in        the image; a value of pi/2 corresponds to a bright line, 0 corresponds        to a step and -pi/2 is a dark line.</p>      <p><b><tt>pc</tt></b> : cell array of phase congruency images (values        between 0 and 1) for each orientation</p>      <p><b><tt>EO</tt></b> : a 2D cell array of complex valued convolution        result</p>      <p><b><tt>T</tt></b> : calculated noise threshold</p>      <h2>Acknowledgment<a name="6"></a></h2>      <p>This function is nothing else than a wrapper for P.Kovesi functions        implementing congruency analysis.</p>      <h2>References<a name="7"></a></h2>      <p>[Koves99] P.D. Kovesi: "Image features from phase congruency", Videre:        Journal of Computer Vision Research, 1:1-26, 1999. <a href="http://mitpress.mit.edu/e-journals/Videre/001/articles/v1n3001.pdf">http://mitpress.mit.edu/e-journals/Videre/001/articles/v1n3001.pdf</a></p>      <p>[Koves02] P.D. Kovesi: "Edges are not just steps", Proc. ACCV, pp. 822-        827, 2002. <a href="www.csse.uwa.edu.au/%7Epk/research/pkpapers/ACCV62.pdf">www.csse.uwa.edu.au/~pk/research/pkpapers/ACCV62.pdf</a></p>      <p>[Koves03] P.D. Kovesi: "Phase congruency detects corners and edges",        Proc. DICTA, pp. 309-318, 2003. <a href="www.csse.uwa.edu.au/%7Epk/research/pkpapers/phasecorners.pdf">www.csse.uwa.edu.au/~pk/research/pkpapers/phasecorners.pdf</a></p>      <p>[Kovesi] P.D. Kovesi: "MATLAB and Octave Functions for Computer Vision        and Image Processing", The University of Western Australia, available at        <a href="http://www.csse.uwa.edu.au/%7Epk/research/matlabfns/">http://www.csse.uwa.edu.au/~pk/research/matlabfns/</a>.</p>      <h2>See also<a name="9"></a></h2>      <p><a href="../../../toolboxes/kovesi/PhaseCongruency/html/PHASECONG3.html"><tt>PHASECONG3</tt></a>,        <a href="EDGECORNER.html"><tt>EDGECORNER</tt></a>, <a href="CANNYEDGE.html"><tt>CANNYEDGE</tt></a>,        <a href="CANNYEDGEPROD.html"><tt>CANNYEDGEPROD</tt></a>, <a href="SDGDEDGE.html"><tt>SDGDEDGE</tt></a>,        <a href="KOETHEDGE.html"><tt>KOETHEDGE</tt></a>, <a href="COMPASSEDGE.html"><tt>COMPASSEDGE</tt></a>,        <a href="ANISOEDGE.html"><tt>ANISOEDGE</tt></a>, <a href="ELDERZUCKEREDGE.html"><tt>ELDERZUCKEREDGE</tt></a>,        <a href="PETROUEDGE.html"><tt>PETROUEDGE</tt></a>, <a href="ROTHWELLEDGE.html"><tt>ROTHWELLEDGE</tt></a>.        Called: <a href="CONGRUENCYEDGE_BASE.html"><tt>CONGRUENCYEDGE_BASE</tt></a>.</p>      <h2>Function implementation<a name="10"></a></h2>      <pre class="codeinput"><span class="keyword">function</span> [M, m, varargout] = congruencyedge(I, varargin)</pre>      <p>check if possible</p>      <pre class="codeinput"><span class="keyword">if</span> ~exist(<span class="string">'phasecong3'</span>,<spanclass="string">'file'</span>)    error(<span class="string">'congruencyedge:libraryerror'</span>,<span class="string">'Kovesi''s library required'</span>);<span class="keyword">end</span></pre>      <p>parsing and checking parameters</p>      <pre class="codeinput">error(nargchk(1, 23, nargin, <span class="string">'struct'</span>));error(nargoutchk(1, 7, nargout, <span class="string">'struct'</span>));<span class="keyword">if</span> ~isnumeric(I)    error(<span class="string">'congruencyedge:inputerror'</span>,<span class="string">'matrix required in input'</span>);<span class="keyword">end</span>p = createParser(<span class="string">'CONGRUENCYEDGE'</span>);<span class="comment">% optional parameters</span><span class="comment">% See PHASECON3 for default parameters' values</span>p.addOptional(<span class="string">'nscale'</span>, 4, @(x)isscalar(x) &amp;&amp; round(x)==x &amp;&amp; x&gt;0);p.addOptional(<span class="string">'norient'</span>, 6, @(x)isscalar(x) &amp;&amp; round(x)==x &amp;&amp; x&gt;0);p.addOptional(<span class="string">'minwave'</span>, 3, @(x)isscalar(x) &amp;&amp; round(x)==x &amp;&amp; x&gt;0);p.addOptional(<span class="string">'mult'</span>, 2.1, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;0);p.addParamValue(<span class="string">'sigonf'</span>, 0.55, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;=0 &amp;&amp; x&lt;=1);p.addParamValue(<span class="string">'k'</span>, 2, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;0);p.addParamValue(<span class="string">'cutoff'</span>, 0.5, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;=0 &amp;&amp; x&lt;=1);p.addParamValue(<span class="string">'g'</span>, 10, @(x)isscalar(x) &amp;&amp; isfloat(x) &amp;&amp; x&gt;0);p.addParamValue(<span class="string">'noise'</span>, -1, @(x)isscalar(x) &amp;&amp; <spanclass="keyword">...</span>    isfloat(x) &amp;&amp; (x&gt;0 || x==-1 || x==-2));<span class="comment">% parse and validate all input arguments</span>p.parse(varargin{:});p = getvarParser(p);</pre>      <p>main processing</p>      <pre class="codeinput">[M, m, or, ft, pc, EO, T]  = <span class="keyword">...</span>    congruencyedge_base(I, p.nscale, p.norient, p.minwave, <span class="keyword">...</span>    p.mult, p.sigonf, p.k, p.cutoff, p.g, p.noise);</pre>      <p>set outputs</p>      <pre class="codeinput"><span class="keyword">if</span> nargout&gt;=3,    varargout{1} = or;    <span class="keyword">if</span> nargout&gt;=4,        varargout{2} = ft;        <span class="keyword">if</span> nargout&gt;=5,            varargout{3} = pc;            <span class="keyword">if</span> nargout&gt;=6,                varargout{4} = EO;                <span class="keyword">if</span> nargout==7,                    varargout{5} = T;                <span class="keyword">end</span>            <span class="keyword">end</span>        <span class="keyword">end</span>    <span class="keyword">end</span><span class="keyword">end</span></pre>      <p>display</p>      <pre class="codeinput"><span class="keyword">if</span> p.disp    C = size(I,3);    figure,    subplot(1,nargout,1), imagesc(rescale(M,0,1)), axis <span class="string">image</span> <spanclass="string">off</span>    title(<span class="string">'phase congruency covariance - max'</span>);    <span class="keyword">if</span> nargout==2        subplot(1,2,2), imagesc(rescale(m,0,1)), axis <span class="string">image</span> <spanclass="string">off</span>        title(<span class="string">'phase congruency covariance - min'</span>);    <span class="keyword">end</span>    <span class="keyword">if</span> C==1,  colormap <span class="string">gray</span>;   <spanclass="keyword">end</span>;<span class="keyword">end</span></pre>      <pre class="codeinput"><span class="keyword">end</span> <span class="comment">% end of congruencyedge</span></pre></div>    <!--##### SOURCE BEGIN #####%% CONGRUENCYEDGE - Wrapper for edge detection based on phase congruency.%%% Description% Nothing else than a wrapper function for P.Kovesi's edge and corner detector% based on phase congrunecy [Koves99,Koves02,Koves03]. % See function |PHASECONG3| in distribution [Kovesi] if you'd rather use the% original function.%%% Syntax%     [M, m]  = CONGRUENCYEDGE(I);%     [M m or ft pc EO T]  = ...%          CONGRUENCYEDGE(I, nscale, norient, minwave, mult, ...%          'Property', propertyvalue, ...);%%% Inputs% See |PHASECONG3| for input parameters.%% *|I|* : input image, possibly multichannel.%      % *|nscale|* : number of wavelet scales; default: |nscale=4|. %      % *|norient|* : number of filter orientations; default: |norient=6|.%      % *|minwave|* : wavelength of smallest scale filter; default: |minwave=3|.%      % *|mult|* : scaling factor between successive filters; default: |mult=2.1|.%%% Property [propertyname  propertyvalues]% *|'sigonof'|* : ratio of the standard deviation of the Gaussian describing%     the log Gabor filter's transfer function in the frequency domain to%     the filter center frequency; default: |sigonof=0.55|.%      % *|'k'|* : standard deviations of the noise energy beyond the mean at which%     the noise threshold point is set; default: |k=2|.%% *|'cutoff'|* : fractional measure of frequency spread below which phase %     congruency values get penalized; default: |cutoff=0.5|.%      % *|'g'|* : sharpness of the transition in the sigmoid function used to %     weight phase congruency for frequency spread; default: |g=10|.%      % *|'noise'|* : parameter specifying the method used to determine noise %     statistics; it is either: %      % * -1 to use median of smallest scale filter responses,% * -2 to use mode of smallest scale filter responses,% * or any >=0 value to set a fixed noise threshold;%      % default: |noise=-1|.%%% Outputs% *|M|* : maximum moment of phase congruency covariance; used as an %     indicator of edge strength.%      % *|m|* : minimum moment of phase congruency covariance; used as an %     indicator of corner strength.%      % *|or|* : orientation image in integer degrees 0-180, positive %     anticlockwise; 0 corresponds to a vertical edge, 90 is horizontal.%      % *|ft|* : local weighted mean phase angle at every point in the image; a %     value of pi/2 corresponds to a bright line, 0 corresponds to a step %     and -pi/2 is a dark line.%      % *|pc|* : cell array of phase congruency images (values between 0 and 1) for  %     each orientation%      % *|EO|* : a 2D cell array of complex valued convolution result%      % *|T|* : calculated noise threshold%%% Acknowledgment% This function is nothing else than a wrapper for P.Kovesi functions% implementing congruency analysis.% %% References% [Koves99]  P.D. Kovesi: "Image features from phase congruency", Videre:%      Journal of Computer Vision Research, 1:1-26, 1999.%      <http://mitpress.mit.edu/e-journals/Videre/001/articles/v1n3001.pdf>%      % [Koves02]  P.D. Kovesi: "Edges are not just steps", Proc. ACCV, pp. 822-%      827, 2002.%      <www.csse.uwa.edu.au/~pk/research/pkpapers/ACCV62.pdf>%      % [Koves03]  P.D. Kovesi: "Phase congruency detects corners and edges",%      Proc. DICTA, pp. 309-318, 2003. %      <www.csse.uwa.edu.au/~pk/research/pkpapers/phasecorners.pdf>%% [Kovesi]   P.D. Kovesi: "MATLAB and Octave Functions for Computer Vision%      and Image Processing", The University of Western Australia, available%      at <http://www.csse.uwa.edu.au/~pk/research/matlabfns/>.%%% Contact% <mailto:grazzja@lanl.gov J.Grazzini> (ISR-2/LANL)% %% See also% <../../../toolboxes/kovesi/PhaseCongruency/html/PHASECONG3.html |PHASECONG3|>,% <EDGECORNER.html |EDGECORNER|>,% <CANNYEDGE.html |CANNYEDGE|>,% <CANNYEDGEPROD.html |CANNYEDGEPROD|>,% <SDGDEDGE.html |SDGDEDGE|>,% <KOETHEDGE.html |KOETHEDGE|>,% <COMPASSEDGE.html |COMPASSEDGE|>,% <ANISOEDGE.html |ANISOEDGE|>,% <ELDERZUCKEREDGE.html |ELDERZUCKEREDGE|>,% <PETROUEDGE.html |PETROUEDGE|>,% <ROTHWELLEDGE.html |ROTHWELLEDGE|>.% Called: % <CONGRUENCYEDGE_BASE.html |CONGRUENCYEDGE_BASE|>.%% Function implementationfunction [M, m, varargout] = congruencyedge(I, varargin)%%% check if possibleif ~exist('phasecong3','file')    error('congruencyedge:libraryerror','Kovesi''s library required');end%%% parsing and checking parameterserror(nargchk(1, 23, nargin, 'struct'));error(nargoutchk(1, 7, nargout, 'struct'));if ~isnumeric(I)    error('congruencyedge:inputerror','matrix required in input'); endp = createParser('CONGRUENCYEDGE');   % optional parameters% See PHASECON3 for default parameters' valuesp.addOptional('nscale', 4, @(x)isscalar(x) && round(x)==x && x>0);p.addOptional('norient', 6, @(x)isscalar(x) && round(x)==x && x>0);p.addOptional('minwave', 3, @(x)isscalar(x) && round(x)==x && x>0);p.addOptional('mult', 2.1, @(x)isscalar(x) && isfloat(x) && x>0);p.addParamValue('sigonf', 0.55, @(x)isscalar(x) && isfloat(x) && x>=0 && x<=1);p.addParamValue('k', 2, @(x)isscalar(x) && isfloat(x) && x>0);p.addParamValue('cutoff', 0.5, @(x)isscalar(x) && isfloat(x) && x>=0 && x<=1);p.addParamValue('g', 10, @(x)isscalar(x) && isfloat(x) && x>0);p.addParamValue('noise', -1, @(x)isscalar(x) && ...    isfloat(x) && (x>0 || x==-1 || x==-2));% parse and validate all input argumentsp.parse(varargin{:});p = getvarParser(p);                                                            %%% main processing[M, m, or, ft, pc, EO, T]  = ...    congruencyedge_base(I, p.nscale, p.norient, p.minwave, ...    p.mult, p.sigonf, p.k, p.cutoff, p.g, p.noise);%%% set outputsif nargout>=3,    varargout{1} = or;    if nargout>=4,        varargout{2} = ft;        if nargout>=5,            varargout{3} = pc;            if nargout>=6,                varargout{4} = EO;                if nargout==7,                    varargout{5} = T;                end            end        end    endend%%% display if p.disp    C = size(I,3);    figure,    subplot(1,nargout,1), imagesc(rescale(M,0,1)), axis image off    title('phase congruency covariance - max');    if nargout==2        subplot(1,2,2), imagesc(rescale(m,0,1)), axis image off        title('phase congruency covariance - min');    end    if C==1,  colormap gray;   end;endend % end of congruencyedge##### SOURCE END #####-->  </body></html>