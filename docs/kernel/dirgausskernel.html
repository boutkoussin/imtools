<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>  <head>    <meta content="text/html; charset=utf-8" http-equiv="content-type">    <!--This HTML was auto-generated from MATLAB code.To make changes, update the MATLAB code and republish this document.      -->    <title>DIRGAUSSKERNEL - Oriented Gaussian kernel.</title>    <meta name="generator" content="MATLAB 7.14">    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">    <meta name="DC.date" content="2012-11-14">    <meta name="DC.source" content="dirgausskernel.m">    <style type="text/css">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}html { min-height:100%; margin-bottom:1px; }html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }html body td { vertical-align:top; text-align:left; }h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }a { color:#005fce; text-decoration:none; }a:hover { color:#005fce; text-decoration:underline; }a:visited { color:#004aa0; text-decoration:none; }p { padding:0px; margin:0px 0px 20px; }img { padding:0px; margin:0px 0px 20px; border:none; }p img, pre img, tt img, li img { margin-bottom:0px; } ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }ul li { padding:0px; margin:0px 0px 7px 0px; }ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }ul li ol li { list-style:decimal; }ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }ol li ol li { list-style-type:lower-alpha; }ol li ul { padding-top:7px; }ol li ul li { list-style:square; }.content { font-size:1.2em; line-height:140%; padding: 20px; }pre, tt, code { font-size:12px; }pre { margin:0px 0px 20px; }pre.error { color:red; }pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }span.keyword { color:#0000FF }span.comment { color:#228B22 }span.string { color:#A020F0 }span.untermstring { color:#B20000 }span.syscmd { color:#B28C00 }.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }.footer p { margin:0px; }  </style>  </head>  <body>    <div class="content">      <h1>DIRGAUSSKERNEL - Oriented Gaussian kernel.</h1>      <!--introduction--><!--/introduction-->      <h2>Contents</h2>      <div>        <ul>          <li><a href="#1">Description</a></li>          <li><a href="#2">Syntax</a></li>          <li><a href="#3">Inputs</a></li>          <li><a href="#4">Output</a></li>          <li><a href="#5">References</a></li>          <li><a href="#7">See also</a></li>          <li><a href="#8">Function implementation</a></li>        </ul>      </div>      <h2>Description<a name="1"></a></h2>      <p>Compute an oriented Gaussian kernel using the approach of [GSW03] and        possibly using the code of [ANIGAUSS].</p>      <h2>Syntax<a name="2"></a></h2>      <pre>     H = DIRGAUSSKERNEL(s1, s2, theta, m, method);</pre>      <h2>Inputs<a name="3"></a></h2>      <p><b><tt>s1</tt></b> : vector of size <tt>(1,n)</tt> (or <tt>(n,1)</tt>)        of standard deviation(s) along the first (short) axis.</p>      <p><b><tt>s2</tt></b> : vector of standard deviation(s) along the (long)        second axis, with same dimension as <tt>s1</tt>.</p>      <p><b><tt>theta</tt></b> : vector of orientation(s) of the kernel, with        same dimension as <tt>s1</tt> (in radians).</p>      <p><b><tt>m</tt></b> : maxium size of the kernel (typ. <tt>m=128</tt>).</p>      <p><b><tt>method</tt></b> : string setting the implementation used for        computing the anisotropic filters; it is:</p>      <div>        <ul>          <li><tt>'geu'</tt> when using the function <tt>ANIGAUSS</tt>            implementing the recursive anisotropic Gaussian proposed in            [GSW03,ANIGAUSS],</li>          <li><tt>'2d'</tt> when using a standard 2D implementation of the            Gaussian.</li>        </ul>      </div>      <h2>Output<a name="4"></a></h2>      <p><b><tt>h</tt></b> : (array of) matrix(ces) (all with maximum size <tt>(m,m)</tt>)        storing the <tt>n</tt> oriented Gaussian filters.</p>      <h2>References<a name="5"></a></h2>      <p>[GSW03] J.M. Geusebroek, A.W.M. Smeulders, and J. Van de Weijer: "Fast        anisotropic gauss filtering", IEEE Trans. on Image Processing,        12(8):938-943, 2003. <a href="http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1217270&amp;tag=1">http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1217270&amp;tag=1</a></p>      <p>[ANIGAUSS] Source code and documentation available at <a href="http://staff.science.uva.nl/%7Emark/downloads.html">http://staff.science.uva.nl/~mark/downloads.html</a></p>      <h2>See also<a name="7"></a></h2>      <p>Ressembles: <a href="gausskernel.html"><tt>GAUSSKERNEL</tt></a>, <a href="hourglasskernel.html"><tt>HOURGLASSKERNEL</tt></a>,        <a href="euclidkernel.html"><tt>EUCLIDKERNEL</tt></a>, <a href="../filter/convolution.html"><tt>CONVOLUTION</tt></a>.        Requires: <a href="matlab:webpub%28whichpath%28%27ANIGAUSS%27%29%29"><tt>ANIGAUSS</tt></a>.</p>      <h2>Function implementation<a name="8"></a></h2>      <pre class="codeinput"><span class="keyword">function</span> H = dirgausskernel(sigma1, sigma2, theta, m, method)</pre>      <p>parsing/checking parameters</p>      <pre class="codeinput">error(nargchk(3, 5, nargin, <span class="string">'struct'</span>));error(nargoutchk(1, 1, nargout, <span class="string">'struct'</span>));<span class="keyword">if</span> ~all(size(sigma1)==size(sigma2)) || ~all(size(sigma1)==size(theta))    error(<span class="string">'dirgausskernel:inputerror'</span>, <span class="keyword">...</span>        <span class="string">'input sigmas and theta must have same dimension'</span>);<span class="keyword">elseif</span> strcmp(method,<span class="string">'geu'</span>) &amp;&amp; ~exist(<spanclass="string">'anigauss'</span>,<spanclass="string">'file'</span>)    error(<span class="string">'dirgausskernel:unknownfunction'</span>,<span class="string">'anigauss toolbox needs to be loaded'</span>);<span class="keyword">end</span></pre>      <p>main calculation</p>      <pre class="codeinput">n = length(sigma1(:));<span class="comment">% size of the kernel</span>s = max([sigma1(:);sigma2(:)]);m = min( s*3, m);m = round(m/2)*2 + 1;<span class="keyword">if</span> strcmp(method,<span class="string">'geu'</span>),    h = zeros(m,m);    c = (m + 1)/2;    h(c,c) = 1;<span class="keyword">end</span><span class="comment">% create the output filters</span>H = zeros( m, m, n);<span class="keyword">for</span> i=1:n    s1 = sigma1(i);    s2 = sigma2(i);    t = theta(i);    <span class="keyword">switch</span> method        <span class="keyword">case</span> <span class="string">'geu'</span>            angle =  t / pi *180;            <span class="comment">% trick of ANIGAUSS: note the order of (s1,s2)... only way to</span>            <span class="comment">% respect the orientation</span>            <span class="keyword">if</span> s1&lt;s2                tmp = s1;                s1 = s2;                s2 = tmp;            <span class="keyword">end</span>            H(:,:,i) = anigauss(h, s1, s2, angle, 0, 0);        <span class="keyword">case</span> <span class="string">'2d'</span>            s1 = s1*s1;            s2 = s2*s2;            x = linspace(-m/2,m/2,m);            [Y,X] = meshgrid(x,x);            <span class="comment">% rotate</span>            X1 = cos(t)*X + sin(t)*Y;            Y1 = - sin(t)*X + cos(t)*Y;            X1 = X1 / s1;            Y1 = Y1 / s2;            h = exp( -(X1.^2 + Y1.^2) );            h = h/sum(h(:));            H(:,:,i) = h;            <span class="keyword">return</span>    <span class="keyword">end</span><span class="keyword">end</span></pre>      <pre class="codeinput"><span class="keyword">end</span> <span class="comment">% end of dirgausskernel</span></pre></div>    <!--##### SOURCE BEGIN #####%% DIRGAUSSKERNEL - Oriented Gaussian kernel.%%% Description% Compute an oriented Gaussian kernel using the approach of [GSW03] and % possibly using the code of [ANIGAUSS].%%% Syntax%       H = DIRGAUSSKERNEL(s1, s2, theta, m, method);%     %% Inputs% *|s1|* : vector of size |(1,n)| (or |(n,1)|) of standard deviation(s) along%      the first (short) axis.%% *|s2|* : vector of standard deviation(s) along the (long) second axis, with%      same dimension as |s1|.%% *|theta|* : vector of orientation(s) of the kernel, with same dimension as%      |s1| (in radians).%% *|m|* : maxium size of the kernel (typ. |m=128|).%% *|method|* : string setting the implementation used for computing the%      anisotropic filters; it is:% % * |'geu'| when using the function |ANIGAUSS| implementing the recursive %           anisotropic Gaussian proposed in [GSW03,ANIGAUSS],% * |'2d'| when using a standard 2D implementation of the Gaussian.%%% Output% *|h|* : (array of) matrix(ces) (all with maximum size |(m,m)|) storing the%      |n| oriented Gaussian filters.%  %% References% [GSW03]  J.M. Geusebroek, A.W.M. Smeulders, and J. Van de Weijer: "Fast%      anisotropic gauss filtering", IEEE Trans. on Image Processing,%      12(8):938-943, 2003.%      <http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1217270&tag=1>%% [ANIGAUSS]  Source code and documentation available at%      <http://staff.science.uva.nl/~mark/downloads.html>%%% Credit% <mailto:grazzja@lanl.gov J.Grazzini> (ISR-2/LANL)%%% See also % Ressembles:% <gausskernel.html |GAUSSKERNEL|>,% <hourglasskernel.html |HOURGLASSKERNEL|>,% <euclidkernel.html |EUCLIDKERNEL|>,% <../filter/convolution.html |CONVOLUTION|>.% Requires:% <matlab:webpub(whichpath('ANIGAUSS')) |ANIGAUSS|>.%% Function implementationfunction H = dirgausskernel(sigma1, sigma2, theta, m, method)%%% parsing/checking parameterserror(nargchk(3, 5, nargin, 'struct'));error(nargoutchk(1, 1, nargout, 'struct'));if ~all(size(sigma1)==size(sigma2)) || ~all(size(sigma1)==size(theta))    error('dirgausskernel:inputerror', ...        'input sigmas and theta must have same dimension');    elseif strcmp(method,'geu') && ~exist('anigauss','file')    error('dirgausskernel:unknownfunction','anigauss toolbox needs to be loaded');end%%% main calculationn = length(sigma1(:));% size of the kernels = max([sigma1(:);sigma2(:)]);m = min( s*3, m);m = round(m/2)*2 + 1;if strcmp(method,'geu'),        h = zeros(m,m);     c = (m + 1)/2;    h(c,c) = 1;end% create the output filtersH = zeros( m, m, n);   for i=1:n        s1 = sigma1(i);    s2 = sigma2(i);    t = theta(i);        switch method                case 'geu'            angle =  t / pi *180;            % trick of ANIGAUSS: note the order of (s1,s2)... only way to            % respect the orientation            if s1<s2                tmp = s1;                s1 = s2;                s2 = tmp;            end            H(:,:,i) = anigauss(h, s1, s2, angle, 0, 0);                    case '2d'            s1 = s1*s1;            s2 = s2*s2;            x = linspace(-m/2,m/2,m);            [Y,X] = meshgrid(x,x);            % rotate            X1 = cos(t)*X + sin(t)*Y;            Y1 = - sin(t)*X + cos(t)*Y;            X1 = X1 / s1;            Y1 = Y1 / s2;            h = exp( -(X1.^2 + Y1.^2) );            h = h/sum(h(:));            H(:,:,i) = h;            return            end    endend % end of dirgausskernel##### SOURCE END #####--></body></html>